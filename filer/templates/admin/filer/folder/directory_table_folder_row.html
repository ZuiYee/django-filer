{% load i18n l10n admin_list filer_tags filer_admin_tags staticfiles %}

{% with item as subfolder %}
    <tr class="js-filer-dropzone js-filer-dropzone-folder" data-url="{% url 'admin:filer-ajax_upload' folder_id=subfolder.id %}" data-folder-name="{{ subfolder.name }}" data-max-uploader-connections="{{ uploader_connections }}" data-max-file-size="20">
        <td class="column-checkbox">
            {% if filer_admin_context.pick_folder and item.file_type == 'Folder' %}
                <a class="insertlink insertlinkButton"
                    href="#" onclick="opener.dismissRelatedFolderLookupPopup(window, {{ subfolder.id }}, '{{ subfolder.quoted_logical_path }}'); return false;" >
                    &nbsp;
                </a>
            {% elif action_form and item.pk and not is_popup %}
                <input type="checkbox" class="action-select" value="folder-{{ item.pk }}" name="_selected_action">
            {% endif %}
        </td>
        <td class="column-icon">
            <a href="{{ subfolder.get_admin_directory_listing_url_path }}{% filer_admin_context_url_params %}"
                title="{% blocktrans with subfolder.name as item_label %}Change '{{ item_label }}' folder details{% endblocktrans %}">
                <img src="{% static 'filer/icons/plainfolder_48x48.png' %}" alt="{% trans 'Folder Icon' %}" width="28" height="28">
            </a>
        </td>
        <td class="column-name">
            <div>
                <a href="{{ subfolder.get_admin_directory_listing_url_path }}{% filer_admin_context_url_params %}"
                    title="{% blocktrans with subfolder.name as item_label %}Change '{{ item_label }}' folder details{% endblocktrans %}">
                    {{ subfolder.name }}
                </a>
            </div>
        </td>
        <td class="column-owner">
            {{ subfolder.owner|default:"n/a" }}
        </td>
        <td class="column-size">
            {% if not subfolder.is_root %}
                <span class="tiny">
                    ({% blocktrans count subfolder.children_count as counter %}{{ counter }} folder{% plural %}{{ counter }} folders{% endblocktrans %},
                    {% blocktrans count subfolder.file_count as counter %}{{ counter }} file{% plural %}{{ counter }} files{% endblocktrans %})
                </span>
            {% endif %}
        </td>
        <td class="column-action">
            {% if subfolder.file_type == "Folder" %}
                <a href="{% url 'admin:filer_folder_change' subfolder.id %}{% filer_admin_context_url_params %}" title="{% trans 'Change folder details' %}" class="action-button"><span class="fa fa-pencil"></span></a>
                <a href="{{ subfolder.get_admin_delete_url }}{% filer_admin_context_url_params %}" class="action-button" title="{% trans 'Remove folder' %}"><span class="fa fa-trash"></span></a>
            {% endif %}
        </td>
    </tr>
{% endwith %}
